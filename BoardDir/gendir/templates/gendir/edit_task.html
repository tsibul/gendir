<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
<!-- Font Awesome -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet"/>
<!-- MDB -->
<!--<link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.4.0/mdb.min.css" rel="stylesheet"/><--->
<!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"><--->
<link href="{% static 'gendir/bootstrap.min.css' %}" rel="stylesheet" crossorigin="anonymous">

    <title>Task edit</title>
</head>
{% include 'gendir/main.html' %}
<body>
<br><br>
<form action="update_task/{{task.id}}" method="post" enctype="multipart/form-data">
{% csrf_token %}
<div class="container">
<div class="fixed-bottom">
<div class="col text-end p-1 m-1">
    <button type="button" class="btn btn-outline-danger">Отменить</button>
    <button type="submit" class="btn btn-outline-success">Сохранить</button>
</div></div>
<div class="border border-2 border-success p-1 m-1">
    <input type="text" name="user" value="{{user}}" hidden>
    <input type="text" name="task_log" value="{{task_log}}" hidden>
<label for="main_0"><h5>основная информация</h5></label>
<div class="row" id="main_0">
   <div class="col-2 mb-1">
      <label for="date_start_0">текущая дата</label>
      <input type="date" class="form-control" id="date_t_0" name="date_start" value="{{date_t|date:'Y-m-d'}}" disabled >
   </div>
   <div class="col-2 mb-1">
      <label for="date_start_0">дата задачи</label>
      <input type="date" class="form-control" id="date_start_0" name="date_start" value="{{task.date_start|date:'Y-m-d'}}" disabled >
   </div>
   <div class=" col mb-1">
    <label for="persons_0">ответственный</label>
    <input type="text" name="persons_0" id="persons_0" class="form-control" value="{{task.person.name}}" disabled>
   </div>
   <div class=" col mb-1">
    <label for="types_0">тип задачи</label>
    <input type="text" name="types_0" id="types_0" class="form-control" value="{{task.type.name}}" disabled>
   </div>
   <div class=" col mb-1">
    <label for="positions_0">позиция </label>
    <input type="text" name="positions_0" id="positions_0" class="form-control" value="{{task.position.name}}" disabled>
   </div>
</div>
<div class="mb-2">
  <label for="name_0">задача</label>
  <input type="text" class="form-control" id="name_0" name="name" placeholder="задача" value="{{task.name}}" disabled>
</div>
<div class="row">
  <div class="col-2 mb-2">
      <label for="priority_0">приоритет</label>
      <input type="number" class="form-control" id="priority_0" name="priority" placeholder="приоритет" value="{{task.priority}}">
  </div>
  <div class="col mb-2">
      <label for="notes_0">комментарий</label>
      <input type="text" class="form-control" id="notes_0" name="notes" placeholder="комментарий" value="{{task.notes}}">
  </div>
</div>
</div><!-- основная информация -->

<div class="border border-2 border-success p-1 m-1">
    <div class="row">
    <div class="col"><label for="rep_0"><h5>отчеты</h5></label></div>
    <div class="col text-end text-success"> {{task.last_report_file}}</div>
    </div>
<div class="row mb-2" id="rep_0">
    <div class="col-2">
        <label for="rep_dt_0">дата</label>
        <input type="date" id="rep_dt_0" name="current_date" value="{{task.current_date|date:'Y-m-d'}}">
    </div>
   <div class="col-4">
        <label for="rep_fil_0">файл</label>
        <input type="file" id="rep_fil_0" name="last_report_file"class="custom-file-input col-auto border">
    </div>
    <div class="col">
    <div class="row">
        <div class="col-1 p-1"> <label for="rep_sum_0">выводы</label></div>
        <div class="col"> <input type="text" class="form-control" id="rep_sum_0" name="last_report_summary"
                                 value="{{task.last_report_summary}}"></div>
    </div>
    </div>
    <div class="mb-2">
      <label for="status_0">статус</label>
      <input type="text" class="form-control" id="status_0" name="status" placeholder="статус" value="{{task.status}}">
    </div>

</div>
</div><!-- отчеты -->

<div class="border border-2 border-success p-1 m-1">
    <label for="mes_0"><h5>мероприятия</h5></label>
<div class="row mb-2" id="mes_0">
    <div class="row align-items-center">
        <div class="col-3">
        <div class="row mb-1">
            <div class="col"> <label for="date_target_0">отчет к</label></div>
            <div class="col"> <input type="date" id="date_target_0" name="date_target"
                                     value="{{task.date_target|date:'Y-m-d'}}"></div>
        </div>
        </div>
        <div class="col">
        <div class="row mb-1">
            <div class="col-2"><label for="todo_first_0">первый шаг</label></div>
            <div class="col"><input type="text" class="form-control" id="todo_first_0" name="to_do_first"
                                    value="{{task.to_do_first}}" placeholder="первый шаг"></div>
        </div>
        </div>
    </div>
    <div class="row mb-1">
        <div class="col-2"><label for="todo_second_0">второй шаг</label></div>
        <div class="col"><input type="text" class="form-control" id="todo_second_0" name="to_do_second"
                                value="{{task.to_do_second}}" placeholder="второй шаг"></div>
    </div>
</div>
</div><!-- мероприятия -->

<div class="border border-2 border-success p-1 m-1">
    <label for="effect_0"><h5>ожидаемый эффект</h5></label>
<div class="row align-items-center" id="effect_0">
  <div class="col mb-2 ">
    <label class="form-check-label" for="incomeChecked_0">влияет на доход</label>
    {% if task.income_affect %}
    <input class="form-check-input bg-success" type="checkbox" value="True" id="incomeChecked_0"
           name="incomeChecked_0" checked>
    {% else %}
    <input class="form-check-input" type="checkbox" value="True" id="incomeChecked_0"
           name="incomeChecked_0">
    {% endif %}
  </div>
  <div class="col mb-2">
    <label class="form-check-label" for="income_amount_0">изм. в месяц</label>
    <input type="number" id="income_amount_0"  name="income_monthly_effect"
           value="{{task.income_monthly_effect}}" placeholder="изм. в месяц">
  </div>
  <div class="col mb-2">
    <label class="form-check-label" for="expensesChecked_0">влияет на затраты</label>
    {% if task.expenses_affect %}
    <input class="form-check-input bg-success" type="checkbox" value="True" id="expensesChecked_0"
           name="expensesChecked" checked>
    {% else %}
    <input class="form-check-input" type="checkbox" value="True" id="expensesChecked_0"
           name="expensesChecked">
    {% endif %}
  </div>
  <div class="col mb-2">
    <label class="form-check-label" for="expenses_amount_0">изм. в месяц</label>
    <input type="number" id="expenses_amount_0" name="expenses_amount"
           value="{{task.expenses_monthly_effect}}" placeholder="изм.в месяц">
  </div>
  <div class="col mb-2">
    <label class="form-check-label" for="profitChecked_0">влияет на прибыль</label>
    {% if task.profit_affect %}
    <input class="form-check-input" type="checkbox" value="True" id="profitChecked_0"
           name="profitChecked" checked>
    {% else %}
    <input class="form-check-input checked-success" type="checkbox" value="True" id="profitChecked_0"
           name="profitChecked">
    {% endif %}
  </div>
  <div class="col mb-2">
    <label class="form-check-label" for="profit_amount_0">изм. в месяц</label>
    <input type="number" id="profit_amount_0" name="profit_amount"
           value="{{task.profit_monthly_effect}}" placeholder="изм.в месяц">
  </div>
</div>
<div class="row mb-2">
    <div class="col-2">
        <label class="form-check-label" for="other_effect_0">другие изменения</label></div>
    <div class="col">
        <input type="text" class="col form-control" id="other_effect_0" name="other_effect"
               value="{{task.other_effect}}"></div>
</div>
</div><!-- ожидаемый эффект -->

<div class="border border-2 border-success p-1 m-1">
    <label for="investments_0"><h5>затраты на реализацию</h5></label>
<div class="row mb-2" id="investments_0">
<label for="invest_0">инвестиции</label>
<div class="row mb-2" id="invest_0">
    <div class="col">
        <label for="inv_0">вложения тыс. руб.</label>
        <input type="number" id="inv_0" name="investments" placeholder="тыс.руб." value="{{task.investments}}">
    </div>
    <div class="col">
        <label for="inv_start_0">дата начала</label>
        <input type="date" id="inv_start_0" name="investments_start" placeholder="дата"
               value="{{task.investments_start|date:'Y-m-d'}}">
    </div>
    <div class="col">
        <label for="inv_per_0">период инвестирования</label>
        <input type="number" id="inv_per_0" name="investments_period" placeholder="кол-во месяцев"
               value="{{task.investment_period}}">
    </div>
</div>
<label for="pay_0">текущие расходы</label>
<div class="row mb-2" id="pay_0">
<div class="col">
        <label for="exp_0">постоянные затраты.</label>
        <input type="number" id="exp_0" name="monthly_expenses" placeholder="тыс.руб."
               value="{{task.monthly_expenses}}">
    </div>
    <div class="col">
        <label for="exp_start_0">дата начала</label>
        <input type="date" id="exp_start_0" name="expenses_start" value="{{task.expenses_start|date:'Y-m-d'">
    </div>
    <div class="col">
        <label for="exp_per_0">период платежей</label>
        <input type="number" id="exp_per_0" name="expenses_period" placeholder="кол-во месяцев"
               value="{{task.expenses_period}}">
    </div>
</div>
</div>
</div><!-- затраты на реализацию-->

</div>

</form>
<br><br><br>

<script src="{% static 'gendir/bootstrap.bundle.min.js' %}" crossorigin="anonymous"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script><--->
</body>
</html>